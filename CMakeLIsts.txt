cmake_minimum_required(VERSION 3.1)
project(cppmarkup)

## === PP -----------------------------------------------------------------------------------------
if ((MSVC) AND (MSVC_VERSION GREATER_EQUAL 1914))
    # target_compile_options(stxxl INTERFACE "/Zc:__cplusplus")
    add_compile_options("/Zc:__cplusplus")
endif()

## === THIRD --------------------------------------------------------------------------------------
add_subdirectory            (third)

## === TARGET: CPPMARKUP --------------------------------------------------------------------------
# -- SOURCE 
set                         (ROOT_SRC_DIR                   ${CMAKE_CURRENT_SOURCE_DIR}/src)
set                         (CPPMARKUP_INCLUDE_DIR          ${ROOT_SRC_DIR})

aux_source_directory        (${ROOT_SRC_DIR}/kangsw        CPPMARKUP_LIB_SOURCE)
aux_source_directory        (${ROOT_SRC_DIR}/kangsw/markup CPPMARKUP_LIB_SOURCE)

# -- TARGET LIBRARY
add_library                 (CPPMARKUP_lib      STATIC      ${CPPMARKUP_LIB_SOURCE})
add_library                 (cppmarkup::static  ALIAS       CPPMARKUP_lib)

target_compile_features     (CPPMARKUP_lib      PUBLIC      cxx_std_17)
target_include_directories  (CPPMARKUP_lib      PUBLIC      ${CPPMARKUP_INCLUDE_DIR})

# -- INSTALLATIONS

## === TARGET: EXTENSIONS -------------------------------------------------------------------------

## === TEST ---------------------------------------------------------------------------------------
add_subdirectory(tests)